(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{439:function(n,e,t){"use strict";t.r(e),e.default="<template>\n  <div>\n    <div>\n      <el-button type=\"primary\" size=\"mini\" @click=\"doValidate\">校验</el-button>\n      <el-button type=\"primary\" size=\"mini\" @click=\"doSubmit\">提交</el-button>\n    </div>\n    <worktable class=\"mt-10\" border />\n  </div>\n</template>\n\n<script>\nimport { defineComponent, h, nextTick } from 'vue-demi'\nimport { useWorktable, Worktable } from '@edsheet/element-ui'\n\nexport default defineComponent({\n  components: { Worktable },\n  setup() {\n    const columns = [\n      {\n        title: '序号',\n        field: 'seq',\n        virtual: true,\n        width: 80,\n        render(row) {\n          const seqs = []\n          let parent = row\n          while (parent != null) {\n            seqs.unshift(parent.index + 1)\n            parent = parent.parent\n          }\n          return seqs.join('-')\n        },\n      },\n      {\n        title: '名称',\n        field: 'name',\n        type: 'string',\n        component: 'Input',\n        required: true,\n        requiredMessage: '缺少名称',\n      },\n      {\n        title: '年龄',\n        field: 'age',\n        type: 'number',\n        component: 'Input',\n        componentProps: {\n          type: 'number',\n        },\n        default: '',\n      },\n      {\n        title: '性别',\n        field: 'gender',\n        type: 'string',\n        width: 200,\n        component: 'Select',\n        enum: [\n          { label: '男孩', value: 'boy' },\n          { label: '女孩', value: 'girl' },\n        ],\n      },\n      {\n        title: '操作',\n        field: 'action',\n        virtual: true,\n        width: 120,\n        renderHeader({ worktable }) {\n          return h('el-button', {\n            props: {\n              type: 'primary',\n              size: 'mini',\n              circle: true,\n              icon: 'el-icon-plus',\n            },\n            on: { click: worktable.add },\n          })\n        },\n        render: (row) => {\n          return h('div', [\n            h(\n              'el-button',\n              {\n                props: { type: 'text', size: 'mini' },\n                on: {\n                  click: () => {\n                    row.addRow()\n                    nextTick(() => row.toggleExpansion(true))\n                  },\n                },\n              },\n              '添加组员'\n            ),\n            h(\n              'el-button',\n              {\n                style: { color: 'red' },\n                props: { type: 'text', size: 'mini' },\n                on: { click: () => row.removeSelf() },\n              },\n              '删除'\n            ),\n          ])\n        },\n      },\n    ]\n    const worktable = useWorktable({\n      initialData: [\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n        { name: '琪琪', gender: 'girl' },\n      ],\n      columns,\n      layout: { pagination: true },\n    })\n    function doValidate() {\n      worktable\n        .validate()\n        .then(() => {\n          console.log('validate successed')\n        })\n        .catch((err) => {\n          console.error(err)\n        })\n    }\n    async function doSubmit() {\n      await worktable.validate()\n      const data = worktable.getData()\n      console.log('data', data)\n    }\n    return {\n      doValidate,\n      doSubmit,\n    }\n  },\n})\n<\/script>\n"}}]);